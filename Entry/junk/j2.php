<?php

$str = '{
"doi":"10.1016/j.ympev.2007.06.010",
"pii":"S1055-7903(07)00213-8",
"atitle":"Mitochondrial paraphyly in a polymorphic poison frog species (Dendrobatidae; D. pumilio)",
"authors":[
{"forename":"Sabine", "surname":"Hagemann", "email":"s.hagemann@dkfz.de"},
{"forename":"Heike", "surname":"Prhl"}
],

"figures":[
{
"id":"fig1",
"label":"Fig. 1",
"caption":"Distribution of sample localities in Costa Rica and Panama. 1, Upala; 2, Cao Negro; 3, La Selva; 4, Tortuguero; 5, Gupiles; 6, Pueblo Nuevo; 7, Siquirres; 8, Bribri; 9, Puerto Viejo; 10, Almirante; 11, Tierra Oscura; 12, Coln; 13, Solarte; 14, Bastimentos; 15, San Cristbal; 16, Pastores; 17, Popa; 18, Cayo de Agua; 19, Loma Partida; 20, Escudo de Veraguas. Populations 1 to 6 belong to the Northern geographic/genetic group, populations 7 to 19 are among the Southern geographic/genetic group, and population 20 was assigned to the Escudo group."
},
{
"id":"fig2",
"label":"Fig. 2",
"caption":"MP, ML and Bayesian phylogeny of D. pumilio populations and related species based on combined mitochondrial 16S, Cyt b and COI sequences. Values (top down) are (1) parsimony and (2) maximum likelihood bootstrap supports (in percentage, MP: 2000 bootstraps, ML: 500 bootstraps), and (3) approximated bayesian posterior probabilities in percentage (1,000,000 replicates) for the equivalent node. Branch lengths were estimated using ML. CR, Costa Rica; P, Panama; S, Southern group; N, Northern group; E, Escudo group. The tree was rooted using D. histrionicus as outgroup (not shown)."
}
],

"tables":[
{
"label":"Table 1",
"caption":"Localities of the investigated D. pumilio populations and related species, characteristic colouration and pattern, and accession numbers of gene fragments",
"header":[
["Population/species+","Country+","Colour and pattern+","GPS coordinates or localities+","GenBank accession numbers","-","-"],
["16S","Cyt b","COI"]
],
"rows":[
["Upala+","Costa Rica+","Red dorsum and venter, blue legs+","N10° 54.448\'","EF597169+","EF597209+","EF597189+"],
["W85° 02.494\'"],
["","","","","","",""],
["Cao Negro+","Costa Rica+","Red dorsum and venter, blue legs+","N10° 51.543\'","EF597162","EF597202","EF597182"],
["W84° 46.461\'","","",""],
["","","","","","",""],
["La Selva+","Costa Rica+","Spotted, with red dorsum and venter, blue legs+","N10° 26.499\'","EF597164+","EF597204+","EF597184+"],
["W84° 46.461\'"],
["","","","","","",""],
["Tortuguero+","Costa Rica+","Spotted, with red dorsum and venter, blackish-blue legs+","N10° 36.773\'","EF597168","EF597208","EF597188"],
["W83° 31.868\'","","",""],
["","","","","","",""],
["Gupiles+","Costa Rica+","Red dorsum and venter, blue legs+","N10° 11.297\'","EF597163+","EF597203+","EF597183+"],
["W83° 49.274\'"],
["","","","","","",""],
["Pueblo Nuevo+","Costa Rica+","Red dorsum and venter, blue legs+","N10° 19.305\'","EF597165","EF597205","EF597185"],
["W83° 34.440\'","","",""],
["","","","","","",""],
["Siquirres+","Costa Rica+","Spotted, with red dorsum and venter, blackish-blue legs+","N10° 05.546\'","EF597167+","EF597207+","EF597187+"],
["W83° 31.121\'"],
["","","","","","",""],
["Puerto Viejo+","Costa Rica+","Red dorsum and venter with brownish pattern, red legs+","N09° 38.512\'","EF597166","EF597206","EF597186"],
["W82° 45.223\'","","",""],
["","","","","","",""],
["Bribri+","Costa Rica+","Spotted, with red dorsum and venter, red legs+","N09° 38.437\'","EF597161","EF597201","EF597181"],
["W82° 52.573\'","","",""],
["","","","","","",""],
["Almirante+","Panama+","Red dorsum and venter, grey legs+","N9° 17.166\'","EF597170","EF597210","EF597190"],
["W82° 23.439\'","","",""],
["","","","","","",""],
["Tierra Oscura+","Panama+","Black/blue dorsum and legs, blue venter+","N9° 10.736\'","EF597180","EF597220","EF597200"],
["W82° 15.527\'","","",""],
["","","","","","",""],
["Isla Coln+","Panama+","Spotted, with green dorsum, yellow venter, brown legs+","N9° 23.418\'","EF597172","EF597212","EF597192"],
["W82° 14.182\'","","",""],
["","","","","","",""],
["Isla Bastimentos+","Panama+","Red dorsum, white venter, grey legs+","N9°17.420 \'","EF597171","EF597211","EF597191"],
["W82° 04.949\'","","",""],
["","","","","","",""],
["Isla Solarte+","Panama+","Orange dorsum and venter, orange legs+","N9°20.096 \'","EF597179","EF597219","EF597199"],
["W82° 13.140\'","","",""],
["","","","","","",""],
["Isla San Cristbal+","Panama+","Red dorsum and venter, grey legs+","N9° 16.291\'","EF597178","EF597218","EF597198"],
["W82° 17.403\'","","",""],
["","","","","","",""],
["Isla Pastores+","Panama+","Yellow/brown dorsum and legs, yellow venter+","N9° 14.395\'","EF597176","EF597216","EF597196"],
["W82° 21.033\'","","",""],
["","","","","","",""],
["Isla Popa+","Panama+","Dark green dorsum, blue venter and legs+","N9°13.109 \'","EF597177+","EF597217+","EF597197+"],
["W82° 08.468\'"],
["","","","","","",""],
["Isla Cayo de Agua+","Panama+","Green dorsum, yellow venter, blue legs+","N9° 09.187\'","EF597173","EF597213","EF597193"],
["W82° 03.305\'","","",""],
["","","","","","",""],
["Isla Loma Partida+","Panama+","Spotted, with green/blue dorsum, blue venter, brown legs+","N9° 08.202\'","EF597175","EF597215","EF597195"],
["W82° 09.955\'","","",""],
["","","","","","",""],
["Isla Escudo de Veraguas+","Panama+","Red dorsum, light blue flanks, venter, and legs+","N9° 06.106\'","EF597174+","EF597214+","EF597194+"],
["W81° 32.959\'"],
["","","","","","",""],
["D. arboreus","Panama","Yellow spots, brown or black dorsum and venter","Fortuna","AF098748","AF120015","AF097504"],
["","","","","","",""],
["D. speciosus","Panama","Irregular black spots, bright red dorsum and venter","Fortuna","AF098747","AF120014","AF097503"],
["","","","","","",""],
["D. histrionicus","Ecuador","Black pattern on orange, yellow, red, white or blue base colour","Santo Domingo","AF098742","AF120009","AF097498"],
["","","","","","",""],
["D. granuliferus","Costa Rica","Red or orange dorsum, green to blue-green legs","Corcovado national park","AF098749","AF120016","AF097505"]
]
}
,
{
"label":"Table 2",
"caption":"Mean genetic distances (K2P) within and between monophyletic groups of investigated populations and D. histrionicus",
"rows":[
["Mean genetic distance within groups (%)","-"],
["Northern group","1.8"],
["Southern group","0.9"],
["",""],
["Mean genetic distance between groups (%)","-"],
["Northern group-Southern group","3.5"],
["Northern group-Escudo group","3.5"],
["Southern group-Escudo group","4.1"],
["Northern group-D. histrionicus","4.6"],
["Southern group-D. histrionicus","4.3"],
["Escudo group-D. histrionicus","4.9"]
]
}
],
"urls":[
"http://www.dendrobase.de",
"http://www.dendrobase.de",
"doi:10.1016/j.ympev.2007.06.010",
"http://mesquiteproject.org"],

"bibliography":[
{
"genre":"article",
"date":"2002",
"volume":"56",
"title":"Evolution",
"spage":"1045",
"epage":"1058",
"authors":[
{"forename":"R.P.", "surname":"Anderson"},
{"forename":"C.O.", "surname":"Handley"}
],
"atitle":"Dwarfism in insular sloths: biogeography, selection, and evolutionary rate",
"id":"bib1"

}
,
{
"genre":"article",
"date":"2000",
"volume":"70",
"title":"Biol. J. Linn. Soc. Lond.",
"spage":"515",
"epage":"540",
"authors":[
{"forename":"M.", "surname":"Clough"},
{"forename":"K.", "surname":"Summers"}
],
"atitle":"Phylogenetic systematics and biogeography of the poison frogs: evidence from mitochondrial DNA sequences",
"id":"bib2"

}
,
{
"genre":"article",
"date":"1874",
"volume":"26",
"title":"Proc. Acad. Nat. Sci. Philadelphia",
"spage":"68",
"epage":"",
"authors":[
{"forename":"", "surname":"Cope"}
],
"atitle":"Dendrobates ignitus",
"id":"bib3"

}
,
{
"genre":"article",
"date":"1967",
"volume":"20",
"title":"J. Chem. Ecol.",
"spage":"943",
"epage":"955",
"authors":[
{"forename":"J.W.", "surname":"Daly"},
{"forename":"C.W.", "surname":"Myers"}
],
"atitle":"Toxicity of Panamanian poison frogs (Dendrobatidae)",
"id":"bib4"

}
,
{
"genre":"article",
"date":"2006",
"volume":"440",
"title":"Nature",
"spage":"208",
"epage":"211",
"authors":[
{"forename":"C.R.", "surname":"Darst"},
{"forename":"M.E.", "surname":"Cummings"}
],
"atitle":"Predator learning favours mimicry of a less-toxic model in poison frogs",
"id":"bib5"

}
,
{
"genre":"article",
"date":"2003",
"volume":"34",
"title":"Annu. Rev. Ecol. Evol. Syst.",
"spage":"397",
"epage":"423",
"authors":[
{"forename":"D.J.", "surname":"Funk"},
{"forename":"K.E.", "surname":"Omland"}
],
"atitle":"The frequency, causes and consequences of species level paraphyly and polyphyly: insights from animal mitochondrial DNA",
"id":"bib6"

}
,
{
"genre":"article",
"date":"1996",
"volume":"12",
"title":"Comput. Appl. Biosci.",
"spage":"543",
"epage":"548",
"authors":[
{"forename":"N.", "surname":"Galtier"},
{"forename":"M.", "surname":"Gouy"},
{"forename":"C.", "surname":"Gautier"}
],
"atitle":"SEAVIEW and PHYLO_WIN: two graphic tools for sequence alignment and molecular phylogeny",
"id":"bib7"

}
,
{
"genre":"article",
"date":"2006",
"title":"B. Am. Mus. Nat. Hist.",
"spage":"299",
"epage":"",
"authors":[
{"forename":"T.", "surname":"Grant"},
{"forename":"D.R.", "surname":"Frost"},
{"forename":"J.P.", "surname":"Caldwell"},
{"forename":"R.", "surname":"Gagliardo"},
{"forename":"C.F.B.", "surname":"Haddad"},
{"forename":"P.J.R.", "surname":"Kok"},
{"forename":"D.B.", "surname":"Means"},
{"forename":"B.P.", "surname":"Noonan"},
{"forename":"W.E.", "surname":"Schargel"},
{"forename":"W.", "surname":"Wheeler"}
],
"atitle":"Phylogenetic systematics of dart-poison frogs and their relatives (Amphibia, Athesphatanura, Dendrobatidae)",
"id":"bib8"

}
,
{
"spage":"19",
"epage":"45",
"genre":"chapter",
"editors":[
{"forename":"J.D.", "surname":"Ferraris"},
{"forename":"S.R.", "surname":"Palumbi"}
],
"title":"Molecular Zoology: Advances, Strategies and Protocols",
"date":"1996",
"publisher":"John Wiley & Sons, Inc",
"publoc":"New York",
"authors":[
{"forename":"J.P.", "surname":"Huelsenbeck"},
{"forename":"D.M.", "surname":"Hillis"},
{"forename":"R.", "surname":"Jones"}
],
"atitle":"Parametric bootstrapping in molecular phylogenetics: applications and performance",
"id":"bib9"

}
,
{
"genre":"article",
"date":"1996",
"volume":"18",
"title":"Herpetofauna",
"spage":"17",
"epage":"26",
"authors":[
{"forename":"K.H.", "surname":"Jungfer"},
{"forename":"P.", "surname":"Weygoldt"},
{"forename":"N.", "surname":"Juraske"}
],
"atitle":"Dendrobates vicentei, ein neuer Pfeilgiftfrosch aus Zentral-Panama",
"id":"bib10"

}
,
{
"description":"Keferstein, W. 1867. Ueber einige neue oder seltene Batrachier aus Australien und dem tropischen Amerika. - Nachrichten von der Georg-Augusts Universitt und der Kniglichen Gesellschaft der Wissenschaften zu Gttingen 18, 341-361.",
"id":"bib11"

}
,
{
"genre":"article",
"date":"1980",
"volume":"16",
"title":"J. Mol. Evol.",
"spage":"111",
"epage":"120",
"authors":[
{"forename":"M.", "surname":"Kimura"}
],
"atitle":"A simple method for estimating evolutionary rates of base substitutions through comparative studies of nucleotide sequences",
"id":"bib12"

}
,
{
"genre":"article",
"date":"1989",
"volume":"86",
"title":"Proc. Natl. Acad. Sci. USA",
"spage":"6196",
"epage":"6200",
"authors":[
{"forename":"T.D.", "surname":"Kocher"},
{"forename":"W.K.", "surname":"Thomas"},
{"forename":"A.", "surname":"Meyer"},
{"forename":"S.V.", "surname":"Edwards"},
{"forename":"S.", "surname":"Paabo"},
{"forename":"F.X.", "surname":"Villablanca"},
{"forename":"A.C.", "surname":"Wilson"}
],
"atitle":"Dynamics of mitochondrial DNA evolution in animals: amplification and sequencing with conserved primers",
"id":"bib13"

}
,
{
"genre":"book",
"date":"1993",
"publisher":"Pennsylvania State University",
"publoc":"University Park, PA",
"authors":[
{"forename":"S.", "surname":"Kumar"},
{"forename":"K.", "surname":"Tamura"},
{"forename":"M.", "surname":"Nei"}
],
"atitle":"MEGA: Molecular Evolutionary Genetics Analysis",
"id":"bib14"

}
,
{
"genre":"article",
"date":"1999",
"volume":"266",
"title":"Proc. R. Soc. Series B",
"spage":"1829",
"epage":"1835",
"authors":[
{"forename":"S.C.", "surname":"Lougheed"},
{"forename":"C.", "surname":"Gascon"},
{"forename":"D.A.", "surname":"Jones"},
{"forename":"J.P.", "surname":"Bogart"},
{"forename":"P.T.", "surname":"Boag"}
],
"atitle":"Ridges and rivers: a test of competing hypotheses of Amazonian diversification using a dart-poison frog, Epipedobates femoralis",
"id":"bib15"

}
,
{
"description":"Maddison, W.P. Maddison, D.R. 2006. Mesquite: a modular system for evolutionary analysis. Version 1.12. Available from <http://mesquiteproject.org/>.",
"id":"bib16"

}
,
{
"genre":"article",
"date":"1983",
"volume":"248",
"title":"Sci. Am.",
"spage":"120",
"epage":"133",
"authors":[
{"forename":"C.W.", "surname":"Myers"},
{"forename":"J.W.", "surname":"Daly"},
{"forename":"V.", "surname":"Martinez"}
],
"atitle":"Dart poison frogs",
"id":"bib17"

}
,
{
"genre":"article",
"date":"1984",
"volume":"2783",
"title":"Amer. Mus. Novit.",
"spage":"1",
"epage":"20",
"authors":[
{"forename":"C.W.", "surname":"Myers"},
{"forename":"J.W.", "surname":"Daly"},
{"forename":"V.", "surname":"Martinez"}
],
"atitle":"An arboreal poison frog (Dendrobates) from western Panama",
"id":"bib18"

}
,
{
"genre":"article",
"date":"2006",
"volume":"33",
"title":"J. Biogeogr.",
"spage":"1007",
"epage":"1022",
"authors":[
{"forename":"B.P.", "surname":"Noonan"},
{"forename":"K.P.", "surname":"Wray"}
],
"atitle":"Neotropical diversification: the effects of a complex history on diversity within the poison frog genus Dendrobates",
"id":"bib19"

}
,
{
"description":"Palumbi, S.R., Martin, A., Romano, S., McMillan, W.O., Stice, L., Grabowski, G. 1991. A simple fools guide to PCR, Version 2.0., Honolulu, Hawaii.",
"id":"bib20"

}
,
{
"genre":"article",
"date":"1998",
"volume":"14",
"title":"Bioinformatics",
"spage":"817",
"epage":"818",
"authors":[
{"forename":"D.", "surname":"Posada"},
{"forename":"K.", "surname":"Crandall"}
],
"atitle":"MODELTEST: testing the model of DNA substitution",
"id":"bib21"

}
,
{
"description":"Prhl, H., Hagemann, S., Karsch, J., Hbel, G. in press. Geographic advertisement call variation in the strawberry poison frog Dendrobates pumilio. Ethology.",
"id":"bib22"

}
,
{
"genre":"article",
"date":"2003",
"volume":"19",
"title":"Bioinformatics",
"spage":"1572",
"epage":"1574",
"authors":[
{"forename":"F.", "surname":"Ronquist"},
{"forename":"J.P.", "surname":"Huelsenbeck"}
],
"atitle":"MRBAYES 3: bayesian phylogenetic inference under mixed models",
"id":"bib23"

}
,
{
"genre":"article",
"date":"1968",
"title":"Copeia",
"spage":"745",
"epage":"776",
"authors":[
{"forename":"J.M.", "surname":"Savage"}
],
"atitle":"The dendrobatid frogs of Central America",
"id":"bib24"

}
,
{
"description":"Schmidt, O. 1857. Sitzungsber. Akad. Wiss. Wien, Math. Naturwiss. Kl. 24, 12.",
"id":"bib25"

}
,
{
"genre":"article",
"date":"1975",
"volume":"21",
"title":"Nat. Hist. Mus. LA Co. Sci. Bull.",
"spage":"1",
"epage":"55",
"authors":[
{"forename":"P.A.", "surname":"Silverstone"}
],
"atitle":"A revision of the poison-arrow frogs of the genus Dendrobates wagler",
"id":"bib26"

}
,
{
"genre":"article",
"date":"2001",
"volume":"98",
"title":"Proc. Natl. Acad. Sci. USA",
"spage":"6227",
"epage":"6232",
"authors":[
{"forename":"K.", "surname":"Summers"},
{"forename":"M.E.", "surname":"Clough"}
],
"atitle":"The evolution of coloration and toxicity in the poison frog family (Dendrobatidae)",
"id":"bib27"

}
,
{
"genre":"article",
"date":"1997",
"volume":"88",
"title":"J. Hered.",
"spage":"1",
"epage":"",
"authors":[
{"forename":"K.", "surname":"Summers"},
{"forename":"E.", "surname":"Bermingham"},
{"forename":"L.", "surname":"Weight"},
{"forename":"S.", "surname":"Mc Cafferty"},
{"forename":"L.", "surname":"Dahlstrom"}
],
"atitle":"Phenotypic and genetic divergence in three species of dart-poison frogs with contrasting parental behaviour",
"id":"bib28"

}
,
{
"genre":"article",
"date":"1999",
"volume":"55",
"title":"Herpetologica",
"spage":"254",
"epage":"270",
"authors":[
{"forename":"K.", "surname":"Summers"},
{"forename":"L.A.", "surname":"Weigt"},
{"forename":"P.", "surname":"Boag"},
{"forename":"E.", "surname":"Bermingham"}
],
"atitle":"The evolution of female parental care in poison frogs of the genus Dendrobates: evidence from mitochondrial DNA sequences",
"id":"bib29"

}
,
{
"description":"Swofford, D.L. 2002. PAUP. Phylogenetic Analysis Using Parsimony ( and other methods). Version 4b10. Sinauer Associates, Sunderland, MA.",
"id":"bib30"

}
,
{
"genre":"article",
"date":"2001",
"volume":"268",
"title":"Proc. R. Soc. Lond. B.",
"spage":"2415",
"epage":"2421",
"authors":[
{"forename":"R.", "surname":"Symula"},
{"forename":"R.", "surname":"Schulte"},
{"forename":"K.", "surname":"Summers"}
],
"atitle":"Molecular phylogenetic evidence for a mimetic radiation in Peruvian poison frogs supports a Mllerian mimicry hypotesis",
"id":"bib31"

}
,
{
"genre":"article",
"date":"2003",
"volume":"26",
"title":"Mol. Phylogenet. Evol.",
"spage":"452",
"epage":"475",
"authors":[
{"forename":"R.", "surname":"Symula"},
{"forename":"R.", "surname":"Schulte"},
{"forename":"K.", "surname":"Summers"}
],
"atitle":"Molecular systematics and phylogeography of Amazonian poison frogs of the genus Dendrobates",
"id":"bib32"

}
,
{
"genre":"article",
"date":"1997",
"volume":"30",
"title":"Nucl.Acid. Res.",
"spage":"109",
"epage":"112",
"authors":[
{"forename":"J.D.", "surname":"Thompson"},
{"forename":"T.J.", "surname":"Gebson"},
{"forename":"F.", "surname":"Plewniak"},
{"forename":"F.", "surname":"Jeanmougin"},
{"forename":"D.G.", "surname":"Higgins"}
],
"atitle":"The CLUSTALX window interface: flexible strategies for multiple sequence alignment aided by quality analysis tools",
"id":"bib33"

}
,
{
"genre":"article",
"date":"2003",
"volume":"3",
"title":"Org. Divers. Evol.",
"spage":"215",
"epage":"226",
"authors":[
{"forename":"M.", "surname":"Vences"},
{"forename":"J.", "surname":"Kosuch"},
{"forename":"R.", "surname":"Boistel"},
{"forename":"C.F.B.", "surname":"Haddad"},
{"forename":"E.", "surname":"La Marca"},
{"forename":"S.", "surname":"Ltters"},
{"forename":"M.", "surname":"Veith"}
],
"atitle":"Convergent evolution of aposematic coloration in Neotropical poison frogs: a molecular phylogenetic perspective",
"id":"bib34"

}
,
{
"genre":"article",
"date":"2000",
"volume":"15",
"title":"Mol. Phylogenet. Evol.",
"spage":"34",
"epage":"40",
"authors":[
{"forename":"M.", "surname":"Vences"},
{"forename":"J.", "surname":"Kosuch"},
{"forename":"S.", "surname":"Ltters"},
{"forename":"A.", "surname":"Widmer"},
{"forename":"K.H.", "surname":"Jungfer"},
{"forename":"J.", "surname":"Khler"},
{"forename":"M.", "surname":"Veith"}
],
"atitle":"Phylogeny and classification of poison frogs (Amphibia: Dendrobatidae), based on mitochondrial 16S and 12S ribosomal RNA gene sequences",
"id":"bib35"

}
]
}
';

$j = json_decode($str);
//print_r($j);


// Fix second row of header (if it exists)
// A cell may span more than one row, which knocks cells in the next row out of alignment
if (isset($j->tables[0]->header[1]))
{
	$r = array();
	foreach ($j->tables[0]->header[0] as $h)
	{
		if (preg_match('/\+$/', $h))
		{
			array_push($r, "-");
		}
		else
		{
			array_push($r, array_shift($j->tables[0]->header[1]));
		}
	}
	print_r($r);
}


function examine_header($table)
{
	echo "===header===\n";
	print_r($table->header);
}


function examine_rows ($table, $n)
{
	$num_rows = max($n, count($tables->rows));

	for ($i = 0; $i < $num_rows; $i++)
	{
		print_r ($table->rows[$i]);
	}

}

// 


foreach ($j->tables as $table)
{
	$has_accession  = false;
	$has_specimens  = false;
	$has_localities = false;
	
	echo $table->caption . "\n";
	
	// Test 1 Caption mentions accession numbers
	if (preg_match('/accession|genbank/', $table->caption))
	{
		$has_accession = true;
	}
	
	// Test 2 Header rows
	examine_header($table);
	
	// Test 3 Table data
	
	// Probe first n rows 
	examine_rows($table, 2);
	
	// Table has info we want
	
	if ($has_accession)
	{
		echo "===has accession===\n";
	}
	
	

}

?>